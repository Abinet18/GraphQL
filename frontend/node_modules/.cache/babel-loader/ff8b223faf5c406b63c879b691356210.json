{"ast":null,"code":"import _objectSpread from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport * as actionTypes from './actions';\nimport Immutable from 'immutable';\nvar initialState = {\n  books: Immutable.OrderedMap(),\n  authors: Immutable.OrderedMap()\n};\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case actionTypes.ADD_BOOK:\n      {\n        var books = state.books.set(action.book.id, action.book);\n        console.log(\"from reducer\", books);\n        return _objectSpread({}, state, {\n          books: books\n        });\n      }\n\n    case actionTypes.FETCH_BOOKS:\n      {\n        fetchQuery(environment, allBooksQuery).then(function (data) {\n          console.log(data);\n          var books = Immutable.OrderedMap();\n          data.viewer.allBooks.edges.map(function (_ref) {\n            var node = _ref.node;\n            books = books.set(node.id, node);\n          });\n          return _objectSpread({}, state, {\n            books: books\n          });\n        });\n      }\n\n    case actionTypes.ADD_AUTHOR:\n      {\n        var authors = state.authors.set(action.authorid, action.author);\n        return _objectSpread({}, state, {\n          authors: authors\n        });\n      }\n\n    case actionTypes.FETCH_AUTHORS:\n      {\n        return _objectSpread({}, state, {\n          authors: action.authors\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/store/reducer.js"],"names":["actionTypes","Immutable","initialState","books","OrderedMap","authors","reducer","state","action","type","ADD_BOOK","set","book","id","console","log","FETCH_BOOKS","fetchQuery","environment","allBooksQuery","then","data","viewer","allBooks","edges","map","node","ADD_AUTHOR","authorid","author","FETCH_AUTHORS"],"mappings":";AAAA,OAAO,KAAKA,WAAZ,MAA6B,WAA7B;AACA,OAAOC,SAAP,MAAsB,WAAtB;AAEA,IAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAEF,SAAS,CAACG,UAAV,EADU;AAEjBC,EAAAA,OAAO,EAACJ,SAAS,CAACG,UAAV;AAFS,CAArB;;AAKA,IAAME,OAAO,GAAG,SAAVA,OAAU,GAChB;AAAA,MADiBC,KACjB,uEADuBL,YACvB;AAAA,MADoCM,MACpC;;AACI,UAAOA,MAAM,CAACC,IAAd;AACE,SAAKT,WAAW,CAACU,QAAjB;AAA0B;AAC1B,YAAIP,KAAK,GAACI,KAAK,CAACJ,KAAN,CAAYQ,GAAZ,CAAgBH,MAAM,CAACI,IAAP,CAAYC,EAA5B,EAA+BL,MAAM,CAACI,IAAtC,CAAV;AAEAE,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BZ,KAA3B;AACE,iCACKI,KADL;AAEEJ,UAAAA,KAAK,EAACA;AAFR;AAID;;AACD,SAAKH,WAAW,CAACgB,WAAjB;AAA6B;AAC3BC,QAAAA,UAAU,CAACC,WAAD,EAAaC,aAAb,CAAV,CACGC,IADH,CACQ,UAAAC,IAAI,EAAI;AACZP,UAAAA,OAAO,CAACC,GAAR,CAAYM,IAAZ;AACA,cAAIlB,KAAK,GAACF,SAAS,CAACG,UAAV,EAAV;AACAiB,UAAAA,IAAI,CAACC,MAAL,CAAYC,QAAZ,CAAqBC,KAArB,CAA2BC,GAA3B,CAA+B,gBAC/B;AAAA,gBADiCC,IACjC,QADiCA,IACjC;AACEvB,YAAAA,KAAK,GAACA,KAAK,CAACQ,GAAN,CAAUe,IAAI,CAACb,EAAf,EAAkBa,IAAlB,CAAN;AACD,WAHD;AAIA,mCACKnB,KADL;AAEEJ,YAAAA,KAAK,EAACA;AAFR;AAID,SAZH;AAcD;;AACD,SAAKH,WAAW,CAAC2B,UAAjB;AAA4B;AAC1B,YAAItB,OAAO,GAACE,KAAK,CAACF,OAAN,CAAcM,GAAd,CAAkBH,MAAM,CAACoB,QAAzB,EAAkCpB,MAAM,CAACqB,MAAzC,CAAZ;AACA,iCACKtB,KADL;AAEEF,UAAAA,OAAO,EAACA;AAFV;AAID;;AACD,SAAKL,WAAW,CAAC8B,aAAjB;AAA+B;AAC7B,iCACKvB,KADL;AAEEF,UAAAA,OAAO,EAACG,MAAM,CAACH;AAFjB;AAID;;AACD;AAAU,aAAOE,KAAP;AAvCZ;AAyCH,CA3CD;;AA6CA,eAAeD,OAAf","sourcesContent":["import * as actionTypes from './actions';\nimport Immutable from 'immutable';\n\nconst initialState = {\n    books: Immutable.OrderedMap(),\n    authors:Immutable.OrderedMap()\n};\n\nconst reducer = (state=initialState,action)=>\n{\n    switch(action.type){\n      case actionTypes.ADD_BOOK:{\n      let books=state.books.set(action.book.id,action.book);\n\n      console.log(\"from reducer\",books);\n        return {\n          ...state,\n          books:books\n          }\n      }\n      case actionTypes.FETCH_BOOKS:{\n        fetchQuery(environment,allBooksQuery)\n          .then(data => {\n            console.log(data);\n            let books=Immutable.OrderedMap();\n            data.viewer.allBooks.edges.map(({node})=>\n            {\n              books=books.set(node.id,node);\n            })\n            return {\n              ...state,\n              books:books\n            }\n          });\n\n      }\n      case actionTypes.ADD_AUTHOR:{\n        let authors=state.authors.set(action.authorid,action.author);\n        return {\n          ...state,\n          authors:authors\n        }\n      }\n      case actionTypes.FETCH_AUTHORS:{\n        return {\n          ...state,\n          authors:action.authors\n        }\n      }\n      default : return state;\n    }\n}\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}