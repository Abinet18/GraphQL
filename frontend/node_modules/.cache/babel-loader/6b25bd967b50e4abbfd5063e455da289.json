{"ast":null,"code":"import _classCallCheck from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/components/Book.js\";\nimport React, { Component } from 'react';\nimport Immutable from \"immutable\";\nimport Modal from './Modal';\nimport { createFragmentContainer, graphql } from 'react-relay';\nimport AddCommentMutation from '../mutations/AddCommentMutation';\nimport DeleteBookMutation from '../mutations/DeleteBookMutation';\nimport UpdateBook from './UpdateBook';\nimport Comments from './Comments';\n\nvar Book =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Book, _Component);\n\n  function Book() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Book);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Book)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      comment: \"\",\n      showUpdateModal: false,\n      showCommentsModal: false,\n      showDetailsModal: false\n    };\n\n    _this.submitComment = function () {\n      AddCommentMutation(_this.props.book, localStorage.getItem(\"authToken\"), _this.state.comment, _this.props.onAddComment);\n\n      _this.setState({\n        comment: \"\"\n      });\n    };\n\n    _this.onDelete = function () {\n      DeleteBookMutation(_this.props.book, _this.props.onDeleteBook);\n    };\n\n    _this.onUpdate = function () {\n      _this.setState({\n        showUpdateModal: true\n      });\n    };\n\n    _this.onUpdateClose = function () {\n      _this.setState({\n        showUpdateModal: false\n      });\n    };\n\n    _this.showMoreComments = function () {\n      _this.setState({\n        showCommentsModal: true\n      });\n    };\n\n    _this.onCommentsClose = function () {\n      _this.setState({\n        showCommentsModal: false\n      });\n    };\n\n    _this.showDetails = function () {\n      _this.setState({\n        showDetailsModal: true\n      });\n    };\n\n    _this.onDetailsClose = function () {\n      _this.setState({\n        showDetailsModal: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Book, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          book = _this$props.book,\n          detail = _this$props.detail;\n      var comments = Immutable.List(book.comments).sortBy(function (comment) {\n        return comment.commentdate;\n      }).reverse();\n      var numberOfComments = comments.size;\n      var showComments = numberOfComments > 3 && detail !== true ? comments.slice(0, 3) : comments;\n      var commentClass = detail === true ? \"commentfull\" : \"comment\";\n      return React.createElement(\"div\", {\n        className: \"bookCard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, book.title), \",\", book.author && book.author.name ? book.author.name : ''), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, book.description), showComments.map(function (comment) {\n        return React.createElement(\"div\", {\n          className: \"commentCard\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"commenter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, comment.user.fullname), React.createElement(\"span\", {\n          className: commentClass,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"  \", comment.comment)));\n      }), numberOfComments > 3 && detail !== true ? React.createElement(\"div\", {\n        className: \"commentCard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"primary wideButton\",\n        onClick: this.showMoreComments,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, \"Show All Comments\"))) : null, React.createElement(\"div\", {\n        className: \"commentCard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"commentInput\",\n        type: \"text\",\n        value: this.state.comment,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            comment: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"primary\",\n        onClick: this.submitComment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"comment\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"primary\",\n        onClick: this.onUpdate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Update\"), React.createElement(\"button\", {\n        className: \"primary deleteButton\",\n        onClick: this.onDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Delete\"), detail !== true ? React.createElement(\"button\", {\n        className: \"primary\",\n        onClick: this.showDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Full View\") : ''), React.createElement(Modal, {\n        show: this.state.showUpdateModal,\n        onClose: this.onUpdateClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(UpdateBook, {\n        book: this.props.book,\n        onClose: this.onUpdateClose,\n        onUpdateBook: this.props.onUpdateBook,\n        authors: this.props.authors,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        show: this.state.showCommentsModal,\n        onClose: this.onCommentsClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Comments, {\n        comments: comments,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        show: this.state.showDetailsModal,\n        onClose: this.onDetailsClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(Book, {\n        book: book,\n        detail: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Book;\n}(Component);\n\nexport default Book;","map":{"version":3,"sources":["/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/components/Book.js"],"names":["React","Component","Immutable","Modal","createFragmentContainer","graphql","AddCommentMutation","DeleteBookMutation","UpdateBook","Comments","Book","state","comment","showUpdateModal","showCommentsModal","showDetailsModal","submitComment","props","book","localStorage","getItem","onAddComment","setState","onDelete","onDeleteBook","onUpdate","onUpdateClose","showMoreComments","onCommentsClose","showDetails","onDetailsClose","detail","comments","List","sortBy","commentdate","reverse","numberOfComments","size","showComments","slice","commentClass","title","author","name","description","map","user","fullname","e","target","value","onUpdateBook","authors"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Immutable from \"immutable\";\nimport Modal from './Modal';\nimport {createFragmentContainer,graphql} from 'react-relay';\nimport AddCommentMutation from '../mutations/AddCommentMutation';\nimport DeleteBookMutation from '../mutations/DeleteBookMutation';\nimport UpdateBook from './UpdateBook';\nimport Comments from './Comments';\n\n\nclass Book extends Component<Props>\n{\n  state={\n        comment:\"\",\n        showUpdateModal:false,\n        showCommentsModal:false,\n        showDetailsModal:false\n      };\n  render()\n  {\n    const {book,detail}=this.props;\n\n    const comments=Immutable.List(book.comments).sortBy(comment=>comment.commentdate).reverse();\n\n\n    const numberOfComments=comments.size;\n    const showComments=numberOfComments>3 && detail!==true ?comments.slice(0,3):comments\n    const commentClass=detail===true?\"commentfull\":\"comment\";\n\n    return (\n      <div className=\"bookCard\">\n            <p><strong>{book.title}</strong>,{book.author && book.author.name?book.author.name:''}</p>\n            <p>{book.description}</p>\n            {showComments.map(comment=>(\n              <div className=\"commentCard\">\n                <em><span className=\"commenter\">{comment.user.fullname}</span><span className={commentClass}>  {comment.comment}</span>\n            </em></div>\n          ))}\n          {numberOfComments>3 && detail!==true ?<div className=\"commentCard\"><span><button className=\"primary wideButton\" onClick={this.showMoreComments}>Show All Comments</button></span></div>:null}\n      <div className=\"commentCard\">\n        <input className=\"commentInput\" type=\"text\" value={this.state.comment} onChange={(e)=>this.setState({comment:e.target.value})}/>\n        <button className=\"primary\" onClick={this.submitComment}>comment</button>\n      </div>\n\n    <div>\n      <button className=\"primary\" onClick={this.onUpdate}>Update</button>\n      <button className=\"primary deleteButton\" onClick={this.onDelete}>Delete</button>\n      {detail!==true?<button className=\"primary\" onClick={this.showDetails}>Full View</button>:''}\n    </div>\n    <Modal show={this.state.showUpdateModal} onClose={this.onUpdateClose}>\n      <UpdateBook book={this.props.book} onClose={this.onUpdateClose} onUpdateBook={this.props.onUpdateBook} authors={this.props.authors}/>\n    </Modal>\n    <Modal show={this.state.showCommentsModal} onClose={this.onCommentsClose}>\n    <Comments comments={comments}/>\n  </Modal>\n  <Modal show={this.state.showDetailsModal} onClose={this.onDetailsClose}>\n  <Book book={book} detail={true}/>\n</Modal>\n  </div>\n  );\n\n  }\n\n  submitComment=()=>\n  {\n    AddCommentMutation(this.props.book,localStorage.getItem(\"authToken\"),this.state.comment,this.props.onAddComment);\n    this.setState({comment:\"\"});\n  }\n  onDelete=()=>{\n    DeleteBookMutation(this.props.book,this.props.onDeleteBook);\n  }\n  onUpdate=()=>{\n    this.setState({showUpdateModal:true});\n  }\n  onUpdateClose=()=>{\n    this.setState({showUpdateModal:false});\n  }\n  showMoreComments=()=>\n  {\n    this.setState({showCommentsModal:true});\n  }\n  onCommentsClose=()=>\n  {\n    this.setState({showCommentsModal:false});\n  }\n  showDetails=()=>\n  {\n    this.setState({showDetailsModal:true});\n  }\n  onDetailsClose=()=>\n  {\n    this.setState({showDetailsModal:false});\n  }\n\n}\n\nexport default Book;\n"]},"metadata":{},"sourceType":"module"}