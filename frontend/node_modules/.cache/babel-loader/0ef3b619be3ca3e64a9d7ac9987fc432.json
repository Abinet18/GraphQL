{"ast":null,"code":"import _classCallCheck from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/components/AuthorContainer.js\";\nimport React, { Component } from 'react';\nimport { graphql, fetchQuery } from 'react-relay';\nimport environment from '../Environment';\nimport { connect } from 'react-redux';\nimport AuthorList from './AuthorList';\nimport * as actionTypes from '../store/actions';\n\nvar allAuthorsQuery = function allAuthorsQuery() {\n  var node = require(\"./__generated__/AuthorContainerQuery.graphql\");\n\n  if (node.hash && node.hash !== \"dac5775a9aa32657853d305adba40a7d\") {\n    console.error(\"The definition of 'AuthorContainerQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n  }\n\n  return require(\"./__generated__/AuthorContainerQuery.graphql\");\n};\n\nvar AuthorContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AuthorContainer, _Component);\n\n  function AuthorContainer() {\n    _classCallCheck(this, AuthorContainer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AuthorContainer).apply(this, arguments));\n  }\n\n  _createClass(AuthorContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      console.log(\"trying to fetch authors\");\n      fetchQuery(environment, allAuthorsQuery).then(function (data) {\n        console.log(data);\n        var authors = new Map();\n        data.authorviewer.allAuthors.edges.map(function (_ref) {\n          var node = _ref.node;\n          authors.set(node.id, node);\n        });\n\n        _this.props.onFetchAuthors(authors);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Authors\"), this.props.authors.size > 0 ? React.createElement(AuthorList, {\n        authors: this.props.authors,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }) : '');\n    }\n  }]);\n\n  return AuthorContainer;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    authors: state.authors\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onFetchAuthors: function onFetchAuthors(authors) {\n      return dispatch({\n        type: actionTypes.FETCH_AUTHORS,\n        authors: authors\n      });\n    },\n    onAddAuthor: function onAddAuthor(author) {\n      return dispatch({\n        type: actionTypes.ADD_AUTHOR,\n        author: author\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthorContainer);","map":{"version":3,"sources":["/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/components/AuthorContainer.js"],"names":["React","Component","graphql","fetchQuery","environment","connect","AuthorList","actionTypes","allAuthorsQuery","AuthorContainer","console","log","then","data","authors","Map","authorviewer","allAuthors","edges","map","node","set","id","props","onFetchAuthors","size","mapStateToProps","state","mapDispatchToProps","dispatch","type","FETCH_AUTHORS","onAddAuthor","author","ADD_AUTHOR"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,OAAR,EAAgBC,UAAhB,QAAiC,aAAjC;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,OAAOC,UAAP,MAAwB,cAAxB;AACA,OAAO,KAAKC,WAAZ,MAA6B,kBAA7B;;AAGA,IAAMC,eAAe,YAAfA,eAAe;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,CAArB;;IAwBMC,e;;;;;;;;;;;;;wCAEJ;AAAA;;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAR,MAAAA,UAAU,CAACC,WAAD,EAAaI,eAAb,CAAV,CACGI,IADH,CACQ,UAAAC,IAAI,EAAI;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACA,YAAMC,OAAO,GAAC,IAAIC,GAAJ,EAAd;AACAF,QAAAA,IAAI,CAACG,YAAL,CAAkBC,UAAlB,CAA6BC,KAA7B,CAAmCC,GAAnC,CAAuC,gBACvC;AAAA,cADyCC,IACzC,QADyCA,IACzC;AACEN,UAAAA,OAAO,CAACO,GAAR,CAAYD,IAAI,CAACE,EAAjB,EAAoBF,IAApB;AACD,SAHD;;AAIA,QAAA,KAAI,CAACG,KAAL,CAAWC,cAAX,CAA0BV,OAA1B;AACD,OATH;AAWD;;;6BACO;AACR,aACM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEC,KAAKS,KAAL,CAAWT,OAAX,CAAmBW,IAAnB,GAAwB,CAAxB,GAA0B,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAE,KAAKF,KAAL,CAAWT,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1B,GAAqE,EAFtE,CADN;AAMG;;;;EAvByBb,S;;AA2B9B,IAAMyB,eAAe,GAAE,SAAjBA,eAAiB,CAACC,KAAD,EAAU;AAC/B,SAAO;AACHb,IAAAA,OAAO,EAAEa,KAAK,CAACb;AADZ,GAAP;AAGD,CAJD;;AAMA,IAAMc,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAa;AACtC,SAAO;AACLL,IAAAA,cAAc,EAAG,wBAAAV,OAAO;AAAA,aAAIe,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAACvB,WAAW,CAACwB,aAAlB;AAAgCjB,QAAAA,OAAO,EAACA;AAAxC,OAAD,CAAZ;AAAA,KADnB;AAELkB,IAAAA,WAAW,EAAG,qBAAAC,MAAM;AAAA,aAAGJ,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAACvB,WAAW,CAAC2B,UAAlB;AAA6BD,QAAAA,MAAM,EAACA;AAApC,OAAD,CAAX;AAAA;AAFf,GAAP;AAID,CALD;;AAOA,eAAe5B,OAAO,CAACqB,eAAD,EAAiBE,kBAAjB,CAAP,CAA4CnB,eAA5C,CAAf","sourcesContent":["import React, {Component} from 'react';\nimport {graphql,fetchQuery} from 'react-relay';\nimport environment from '../Environment';\nimport { connect } from 'react-redux';\n\nimport AuthorList  from './AuthorList';\nimport * as actionTypes from '../store/actions';\n\n\nconst allAuthorsQuery = graphql`\nquery AuthorContainerQuery\n{\nauthorviewer{\n  allAuthors(last:100) @connection(key:\"AuthorList_allAuthors\",filters:[])\n  {\n    edges\n    {\n      node\n      {\n        id\n        name\n        age\n        birthPlace\n        books\n        {\n          title\n        }\n      }\n    }\n  }\n}\n}\n`\nclass AuthorContainer extends Component {\n  componentDidMount()\n  {\n    console.log(\"trying to fetch authors\");\n    fetchQuery(environment,allAuthorsQuery)\n      .then(data => {\n        console.log(data);\n        const authors=new Map();\n        data.authorviewer.allAuthors.edges.map(({node})=>\n        {\n          authors.set(node.id,node);\n        })\n        this.props.onFetchAuthors(authors);\n      });\n\n  }\n  render(){\n  return (\n        <div>\n          <p className=\"heading\">Authors</p>\n        {this.props.authors.size>0?<AuthorList authors={this.props.authors}/>:''}\n        </div>\n      )\n    }\n\n}\n\nconst mapStateToProps= (state)=> {\n  return {\n      authors: state.authors\n  }\n}\n\nconst mapDispatchToProps = (dispatch)=> {\n  return {\n    onFetchAuthors : authors => dispatch({type:actionTypes.FETCH_AUTHORS,authors:authors}),\n    onAddAuthor : author=> dispatch({type:actionTypes.ADD_AUTHOR,author:author})\n  }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(AuthorContainer);\n"]},"metadata":{},"sourceType":"module"}