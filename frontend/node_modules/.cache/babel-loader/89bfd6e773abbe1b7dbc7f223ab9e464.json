{"ast":null,"code":"import _classCallCheck from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/components/addbook.js\";\nimport React, { Component } from 'react';\nimport { QueryRenderer, graphql } from 'react-relay';\nimport { fetchQuery } from 'relay-runtime';\nimport environment from '../Environment';\nimport AddBookMutation from '../mutations/AddBookMutation';\n\nvar addbookAuthorsQuery = function addbookAuthorsQuery() {\n  var node = require(\"./__generated__/addbookAuthorsQuery.graphql\");\n\n  if (node.hash && node.hash !== \"29ac76b542dbc638f2db16e03e8a20eb\") {\n    console.error(\"The definition of 'addbookAuthorsQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n  }\n\n  return require(\"./__generated__/addbookAuthorsQuery.graphql\");\n};\n\nvar addbook =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(addbook, _Component);\n\n  function addbook() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, addbook);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(addbook)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      title: \"\",\n      authorid: \"\",\n      description: \"\",\n      authors: null\n    };\n\n    _this.addBook = function () {\n      var _this$state = _this.state,\n          title = _this$state.title,\n          description = _this$state.description,\n          authorid = _this$state.authorid;\n      AddBookMutation(title, authorid, description);\n    };\n\n    _this.getAuthors = function () {\n      console.log(\"getting authors\");\n      fetchQuery(environment, addbookAuthorsQuery).then(function (data) {\n        //console.log(data);\n        _this.setState({\n          authors: data.authors\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(addbook, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAuthors();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"bookInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, \"Add New Book\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.title,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            title: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        value: this.state.description,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            description: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }))), this.state.authors !== null && this.state.authors !== undefined ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Author\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        value: this.state.authorid,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            authorid: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, this.state.authors.edges.map(function (_ref) {\n        var node = _ref.node;\n        return React.createElement(\"option\", {\n          value: node.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, node.name);\n      })))) : '', React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"primary\",\n        onClick: this.addBook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Add Book\"))));\n    }\n  }]);\n\n  return addbook;\n}(Component);\n\nexport default addbook;","map":{"version":3,"sources":["/Users/abinetd/Desktop/Redux/GraphQL/frontend/src/components/addbook.js"],"names":["React","Component","QueryRenderer","graphql","fetchQuery","environment","AddBookMutation","addbookAuthorsQuery","addbook","state","title","authorid","description","authors","addBook","getAuthors","console","log","then","data","setState","e","target","value","undefined","edges","map","node","id","name"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport {QueryRenderer,graphql} from 'react-relay';\nimport {fetchQuery} from 'relay-runtime';\nimport environment from '../Environment';\nimport AddBookMutation from '../mutations/AddBookMutation';\nconst addbookAuthorsQuery = graphql`\nquery addbookAuthorsQuery\n{\n  authors\n  {\n    edges\n    {node\n    {\n      id\n      name\n    }\n  }\n\n  }\n}\n`\n\nclass addbook extends Component\n{\n  state = {\n    title:\"\",\n    authorid:\"\",\n    description:\"\",\n    authors:null,\n  };\n\n  componentDidMount()\n  {\n    this.getAuthors();\n  }\n\n  render()\n  {\n    return (\n    <div className=\"bookInput\">\n      Add New Book\n      <div><span>Title</span><span><input type=\"text\" value={this.state.title} onChange={(e)=>this.setState({title:e.target.value})}></input></span></div>\n      <div><span>Description</span><span><textarea value={this.state.description} onChange={(e)=>this.setState({description:e.target.value})}>\n      </textarea></span></div>\n\n      {/* <QueryRenderer\n      environment={environment}\n      query={addbookAuthorsQuery}\n      render={({error,props})=>{\n        if(error)\n        {\n          return <div>{error.message}</div>\n        }\n        else if(props)\n        {\n          //console.log(props.authors);\n        return( */}\n        {\n          (this.state.authors!==null && this.state.authors!==undefined)?  (<div><span>Author</span><span><select value={this.state.authorid}\n          onChange={(e)=>this.setState({authorid:e.target.value})}>\n            {this.state.authors.edges.map(({node})=>(<option value={node.id}>{node.name}</option>))}\n          </select></span></div>):''\n        }\n\n    <div><span></span><span><button className=\"primary\" onClick={this.addBook}>Add Book</button></span></div>\n    </div>\n  )\n  }\n\n  addBook= ()=>\n  {\n    const {title,description,authorid}=this.state;\n    AddBookMutation(title,authorid,description);\n  }\n  getAuthors=()=>\n   {\n     console.log(\"getting authors\");\n     fetchQuery(environment,addbookAuthorsQuery)\n       .then(data => {\n         //console.log(data);\n         this.setState({authors:data.authors});\n       });\n   }\n\n\n}\n\nexport default addbook;\n"]},"metadata":{},"sourceType":"module"}